<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Riveredge Co-op Reserves vs. Westchester Adequate Range</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="cdn.jsdelivr.net"></script>
    <style>
        body { font-family: Arial, sans-serif; background: #f8f9fa; padding: 20px; }
        h1 { text-align: center; font-size: 1.5rem; }
        .chart-container { max-width: 1000px; margin: 40px auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
    <h1>Riveredge Co-op Reserve Fund per Unit vs. Westchester "Solid Adequate" Range</h1>
    <div class="chart-container">
        <canvas id="reservesChart"></canvas>
    </div>

    <script>
        // Correct registration for the annotation plugin
        Chart.register(schema = window['chartjs-plugin-annotation']);

        const ctx = document.getElementById('reservesChart').getContext('2d');

        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['1990','1991','1992','1993','1994','1995','1996','1997','1998','1999','2000','2001','2002','2003','2004','2005','2006','2007','2008','2009','2010','2011','2012','2013','2014','2015','2016','2017','2018','2019','2020','2021','2022','2023','2024'],
                datasets: [
                    {
                        label: 'Actual Reserves per Unit (Riveredge)',
                        data: [2427,1899,1144,1123,1324,1826,1948,2139,3586,3999,4154,4253,4565,3253,2346,1987,1717,3250,4429,6833,7970,7247,7286,9985,9173,9904,9926,11284,12509,14114,15309,15886,15543,14660,12511],
                        borderColor: '#0066cc',
                        backgroundColor: '#0066cc',
                        borderWidth: 3,
                        fill: false,
                        pointRadius: 4,
                        tension: 0.1,
                        order: 1 // Keep this on top
                    },
                    {
                        label: 'Lower Bound Adequate',
                        data: [870,900,925,955,990,1025,1050,1080,1110,1140,1165,1195,1225,1250,1315,1370,1430,1490,1540,1520,1540,1605,1665,1725,1780,1835,1890,1955,2035,2135,2190,2335,2630,2780,2870],
                        borderColor: '#ff8800',
                        borderWidth: 1,
                        fill: false, // Don't fill from the bottom
                        pointRadius: 0,
                        borderDash: [5,5]
                    },
                    {
                        label: 'Upper Bound Adequate',
                        data: [1245,1280,1320,1365,1410,1460,1495,1545,1580,1630,1665,1705,1750,1785,1880,1955,2040,2130,2200,2175,2200,2295,2380,2465,2540,2620,2700,2795,2905,3050,3125,3335,3760,3970,4100],
                        borderColor: '#ff8800',
                        backgroundColor: 'rgba(255,136,0,0.2)',
                        borderWidth: 1,
                        fill: '-1', // Fills the space between this and the Lower Bound
                        pointRadius: 0,
                        borderDash: [5,5]
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'top' },
                    annotation: {
                        annotations: {
                            line2006: {
                                type: 'line',
                                xMin: '2006',
                                xMax: '2006',
                                borderColor: 'red',
                                borderWidth: 2,
                                borderDash: [6, 4],
                                label: {
                                    display: true,
                                    content: '2006',
                                    position: 'start'
                                }
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { callback: v => '$' + v.toLocaleString() }
                    }
                }
            }
        });
    </script>
</body>
</html>
