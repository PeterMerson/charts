<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Annual Operating Expenses - Riveredge Cooperative</title>
    <style>
        body {
            font-family: 'Trebuchet MS', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            color: #333;
        }

        .chart-section {
            max-width: 800px;
            margin: 0 auto 40px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        h2 {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        canvas {
            width: 100% !important;
            height: auto !important;
        }

        hr {
            border: 1px solid #ccc;
            margin: 20px 0;
        }

        .error-message {
            color: red;
            text-align: center;
            margin: 20px 0;
        }

        @media (max-width: 600px) {
            .chart-section {
                padding: 10px;
            }

            h2 {
                font-size: 1.2rem;
            }
        }

        @media print {
            .chart-section {
                page-break-before: always;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
</head>
<body>
    <div class="chart-section">
        <h2>2024 Operating Expenses - $1,981,009 - continued ⬇️</h2> 
        <canvas id="Op-Exp-2024" aria-label="Pie chart of operating expenses for 2024"></canvas>
    </div>

    <hr>

    <div class="chart-section">
        <h2>2023 Operating Expenses - $1,649,127</h2>  
        <canvas id="Op-Exp-2023" aria-label="Pie chart of operating expenses for 2023"></canvas>
    </div>
	<hr>
    <div class="chart-section">
        <h2>2022 Operating Expenses - $1,626,411</h2>  
        <canvas id="Op-Exp-2022" aria-label="Pie chart of operating expenses for 2022"></canvas>
    </div>
	<hr>
    <div class="chart-section">
        <h2>2021 Operating Expenses - $1,463,423</h2>  
        <canvas id="Op-Exp-2021" aria-label="Pie chart of operating expenses for 2021"></canvas>
    </div>
    <div class="chart-section">
        <h2>2020 Operating Expenses - $1,350,723</h2>  
        <canvas id="Op-Exp-2020" aria-label="Pie chart of operating expenses for 2020"></canvas>
    </div>
    <div class="chart-section">
        <h2>2019 Operating Expenses - $1,477,320</h2>  
        <canvas id="Op-Exp-2019" aria-label="Pie chart of operating expenses for 2019"></canvas>
    </div>
	<div class="chart-section">
        <h2>2018 Operating Expenses - $1,477,320</h2>  
        <canvas id="Op-Exp-2018" aria-label="Pie chart of operating expenses for 2018"></canvas>
    </div>
	
	
	
	<script>
        document.addEventListener('DOMContentLoaded', () => {
            // Register the datalabels plugin
            Chart.register(ChartDataLabels);

            const chartData = [
                {
                    id: 'Op-Exp-2024',
               <!-- title: '2024 Operating Expenses - $1,981,009', -->
                    total: 1981009, // Total for percentage calculations
                    data: [
                        { label: 'Real Estate Taxes', value: 384242 },
                        { label: 'Utilities Oil & Electric', value: 328592 },
                        { label: 'Payroll & Related (3 people)', value: 262939 },
                        { label: 'Mortgage Interest & Principal', value: 185476 },
                        { label: 'Repairs & Maintenance', value: 495817 },
                        { label: 'Insurance', value: 99094 },
                        { label: 'Security', value: 77373 },
                        { label: 'Management Fee', value: 52725 },
                        { label: 'Water & Sewer', value: 52221 },
                        { label: 'Legal & Audit Fees', value: 10953 },
                        { label: 'Corporate Taxes & Misc', value: 31577 },
                        { label: 'Excess Operating Income', value: -134338 } // Verify this value
                    ]
                },
                {
                    id: 'Op-Exp-2023',
                <!--title: '2023 Operating Expenses - $1,649,127',  -->
                    total: 1649127, // Total for percentage calculations
                    data: [
                        { label: 'Real Estate Taxes', value: 369302 },
                        { label: 'Utilities Oil & Electric', value: 290726 },
                        { label: 'Payroll & Related (3 people)', value: 249503 },
                        { label: 'Mortgage Interest & Principal', value: 187392 },
                        { label: 'Repairs & Maintenance', value: 224945 },
                        { label: 'Insurance', value: 86587 },
                        { label: 'Security', value: 72322 },
                        { label: 'Management Fee', value: 51150 },
                        { label: 'Water & Sewer', value: 52920 },
                        { label: 'Legal & Audit Fees', value: 39560 },
                        { label: 'Corporate Taxes & Misc', value: 24720 },
                        { label: 'Excess Operating Income', value:  96652 } // Verify this value
                    ]
                },
								  
				{
                    id: 'Op-Exp-2022',
                <!--title: '2022 Operating Expenses - $x,xxx,xxx',  -->
                    total: 1626411, // Total for percentage calculations
                    data: [
                        { label: 'Real Estate Taxes', value: 365157 },
                        { label: 'Utilities Oil & Electric', value: 344997 },
                        { label: 'Payroll & Related (3 people)', value: 235531 },
                        { label: 'Mortgage Interest & Principal', value: 185506 },
                        { label: 'Repairs & Maintenance', value: 199709 },
                        { label: 'Insurance', value: 76529 },
                        { label: 'Security', value: 71560 },
                        { label: 'Management Fee', value: 49341 },
                        { label: 'Water & Sewer', value: 46731 },
                        { label: 'Legal & Audit Fees', value: 24450 },
                        { label: 'Corporate Taxes & Misc', value: 26900 },
                        { label: 'Excess Operating Income', value:  50595 } // Verify this value
                    ]
                },
								  
				{
                    id: 'Op-Exp-2021',
                <!--title: '2021 Operating Expenses - $1,463,423',  -->
                    total: 1463423, // Total for percentage calculations
                    data: [
                        { label: 'Real Estate Taxes', value: 240345 },
                        { label: 'Utilities Oil & Electric', value: 232313 },
                        { label: 'Payroll & Related (3 people)', value: 236860 },
                        { label: 'Mortgage Interest & Principal', value: 185520 },
                        { label: 'Repairs & Maintenance', value: 230215 },
                        { label: 'Insurance', value: 73682 },
                        { label: 'Security', value: 63439 },
                        { label: 'Management Fee', value: 48552 },
                        { label: 'Water & Sewer', value: 48244 },
                        { label: 'Legal & Audit Fees', value: 76978 },
                        { label: 'Corporate Taxes & Misc', value: 27275 },
                        { label: 'Excess Operating Income', value:  215213 } // Verify this value
                    ]
                },
				
				 {
                    id: 'Op-Exp-2020',
                <!--title: '2020 Operating Expenses - $1,350,723',  -->
                    total: 1350723, // Total for percentage calculations
                    data: [
                        { label: 'Real Estate Taxes', value: 381895 },
                        { label: 'Utilities Oil & Electric', value: 163262 },
                        { label: 'Payroll & Related (3 people)', value: 239114 },
                        { label: 'Mortgage Interest & Principal', value: 185513 },
                        { label: 'Repairs & Maintenance', value: 134721 },
                        { label: 'Insurance', value: 64733 },
                        { label: 'Security', value: 60629 },
                        { label: 'Management Fee', value: 47893 },
                        { label: 'Water & Sewer', value: 34416 },
                        { label: 'Legal & Audit Fees', value: 9325 },
                        { label: 'Corporate Taxes & Misc', value: 29322 },
                        { label: 'Excess Operating Income', value: 334222 } // Verify this value
                    ]
                },	
								  
					    {
                    id: 'Op-Exp-2019',
                <!--title: '2019 Operating Expenses - $ 1,477,320',  -->
                    total: 1350723, // Total for percentage calculations
                    data: [
                        { label: 'Real Estate Taxes', value: 399172 },
                        { label: 'Utilities Oil & Electric', value: 231878 },
                        { label: 'Payroll & Related (3 people)', value: 238312 },
                        { label: 'Mortgage Interest & Principal', value: 185564 },
                        { label: 'Repairs & Maintenance', value: 139146 },
                        { label: 'Insurance', value: 67615 },
                        { label: 'Security', value: 61180 },
                        { label: 'Management Fee', value: 46954 },
                        { label: 'Water & Sewer', value: 37334 },
                        { label: 'Legal & Audit Fees', value: 46161 },
                        { label: 'Corporate Taxes & Misc', value: 24004 },
                        { label: 'Excess Operating Income', value: 231573 } // Verify this value
                    ]
                },
				       {
                    id: 'Op-Exp-2018',
                <!--title: '2018 Operating Expenses - $ 1,477,320',  -->
                    total: 1350723, // Total for percentage calculations
                    data: [
                        { label: 'Real Estate Taxes', value: 379313 },
                        { label: 'Utilities Oil & Electric', value: 215961 },
                        { label: 'Payroll & Related (3 people)', value: 223696 },
                        { label: 'Mortgage Interest & Principal', value: 185557 },
                        { label: 'Repairs & Maintenance', value: 154212 },
                        { label: 'Insurance', value: 66478 },
                        { label: 'Security', value: 60748 },
                        { label: 'Management Fee', value: 46032 },
                        { label: 'Water & Sewer', value: 31278 },
                        { label: 'Legal & Audit Fees', value: 48669 },
                        { label: 'Corporate Taxes & Misc', value: 24027 },
                        { label: 'Excess Operating Income', value: 258214 } // Verify this value
                    ]
                }				  
            ];

            const colors = [
                '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF',
                '#FF9F40', '#C9CBCF', '#7BC225', '#FF5733', '#C70039',
                '#900C3F', '#581845'
            ];

            chartData.forEach(({ id, title, total, data }) => {
                try {
                    const ctx = document.getElementById(id).getContext('2d');
                    new Chart(ctx, {
                        type: 'pie',
                        data: {
                            labels: data.map(item => item.label),
                            datasets: [{
                                data: data.map(item => item.value),
                                backgroundColor: colors,
                                borderColor: '#fff',
                                borderWidth: 2
                            }]
                        },
                        options: {
                            responsive: true,
                            plugins: {
                                legend: {
                                    position: 'right',
                                    labels: {
                                        font: {
                                            family: 'Trebuchet MS',
                                            size: 14
                                        }
                                    }
                                },
                                title: {
                                    display: true,
                                    text: title,
                                    font: {
                                        family: 'Trebuchet MS',
                                        size: 16
                                    }
                                },
                                tooltip: {
                                    callbacks: {
                                        label: (context) => {
                                            const value = context.raw;
                                            const percentage = ((value / total) * 100).toFixed(1);
                                            return `${context.label}: $${value.toLocaleString('en-US', { maximumFractionDigits: 0 })} (${percentage}%)`;
                                        }
                                    }
                                },
                                datalabels: {
                                    formatter: (value, context) => {
                                        const percentage = ((value / total) * 100).toFixed(1);
                                        return `${percentage}%`;
                                    },
                                    color: '#fff',
                                    font: {
                                        weight: 'bold',
                                        size: 12
                                    },
                                    textAlign: 'center'
                                }
                            }
                        }
                    });
                } catch (error) {
                    console.error(`Error rendering chart ${id}:`, error);
                    document.getElementById(id).insertAdjacentHTML(
                        'afterend',
                        '<p class="error-message">Failed to load chart. Please try again later.</p>'
                    );
                }
            });
        });
    </script>
</body>
</html>